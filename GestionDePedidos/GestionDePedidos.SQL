
CREATE DATABASE GestionDePedidos
GO

USE GestionDePedidos
GO

DROP TABLE IF EXISTS
[CLIENTES],
[PEDIDOS],
[PRODUCTOSPEDIDOS],
[PRODUCTOS];
GO

DROP PROCEDURE IF EXISTS 
[TablaCLIENTES],
[TablaPEDIDOS],
[TablaProductosPedidos],
[TablaPRODUCTOS],
[AlterPEDIDOS],
[AlterPRODUCTOSPEDIDOSnUno],
[AlterPRODUCTOSPEDIDOSnDos],
[DataCLIENTES];
GO

CREATE PROCEDURE TablaCLIENTES
AS
BEGIN
CREATE TABLE CLIENTES(
CodCliente INT PRIMARY KEY NOT NULL,
Empresa VARCHAR(80) NOT NULL,
Direccion VARCHAR(80) NOT NULL,
Poblacion VARCHAR(80) NOT NULL,
Telefono VARCHAR(80) NOT NULL,
Responsable VARCHAR(80) NOT NULL,
Historial VARCHAR(80) NOT NULL,
)
END
GO
EXECUTE DBO.TablaCLIENTES
GO

CREATE PROCEDURE TablaPEDIDOS
AS
BEGIN
CREATE TABLE PEDIDOS(
NumeroDePedido INT PRIMARY KEY NOT NULL,
FKPED_CodCLIENTE INT NOT NULL,
FechaDePedido DATE NOT NULL,
FormaDePago VARCHAR(50) NOT NULL,
Descuento FLOAT NOT NULL,
Enviado VARCHAR(50) NOT NULL,
)
END
GO
EXECUTE DBO.TablaPEDIDOS
GO

CREATE PROCEDURE TablaProductosPedidos
AS
BEGIN
CREATE TABLE PRODUCTOSPEDIDOS(
FKPP_NumeroDePEDIDO INT NOT NULL,
FKPP_CodARTICULO INT NOT NULL,
Unidades INT NOT NULL,
)
END
GO
EXECUTE DBO.TablaProductosPedidos
GO

CREATE PROCEDURE TablaPRODUCTOS
AS
BEGIN
CREATE TABLE PRODUCTOS(
CodArticulo INT PRIMARY KEY NOT NULL,
Seccion VARCHAR(50) NOT NULL,
NombreArticulo VARCHAR(50) NOT NULL,
Precio FLOAT NOT NULL,
Fecha DATE NOT NULL,
Importado VARCHAR(50) NOT NULL,
PaisDeOrigen VARCHAR(50) NOT NULL,
Foto IMAGE NOT NULL,
)
END
GO
EXECUTE DBO.TablaPRODUCTOS
GO

CREATE PROCEDURE AlterPEDIDOS
AS
BEGIN
ALTER TABLE PEDIDOS
ADD FOREIGN KEY (FKPED_CodCLIENTE) REFERENCES CLIENTES(CodCliente)
END
GO
EXECUTE DBO.AlterPEDIDOS
GO


CREATE PROCEDURE AlterPRODUCTOSPEDIDOSnUno
AS
BEGIN
ALTER TABLE PRODUCTOSPEDIDOS
ADD FOREIGN KEY (FKPP_NumeroDePEDIDO) REFERENCES PEDIDOS (NumeroDePedido)
END
GO
EXECUTE DBO.AlterPRODUCTOSPEDIDOSnUno
GO

CREATE PROCEDURE AlterPRODUCTOSPEDIDOSnDos
AS
BEGIN
ALTER TABLE PRODUCTOSPEDIDOS
ADD FOREIGN KEY (FKPP_CodARTICULO) REFERENCES PRODUCTOS(CodArticulo)
END
GO
EXECUTE DBO.AlterPRODUCTOSPEDIDOSnDos
GO

